BEGIN;

do $$DECLARE
 row_count integer;
BEGIN
 SELECT COUNT(*) INTO row_count FROM "schema_migrations"
 WHERE "version" = 100 AND "dirty" IS FALSE;
 ASSERT row_count = 1, 'The version of the database conflicts with the version of the fixtures';
END$$;

TRUNCATE "user" CASCADE;
TRUNCATE "container_item" CASCADE;
TRUNCATE "collection" CASCADE;
TRUNCATE "phenotype" CASCADE;
TRUNCATE "share" CASCADE;
TRUNCATE "codelist" CASCADE;
TRUNCATE "workspace" CASCADE;
TRUNCATE "property" CASCADE;
TRUNCATE "commit" CASCADE;
TRUNCATE "changeset" CASCADE;


INSERT INTO "user" ("id", "external_id", "name", "properties") VALUES
('00000000-0000-0000-0001-000000000001',	'1',	'Developer',	'{}'),
('00000000-0000-0000-0001-000000000002',	'2',	'Developer 2',	'{}'),
('00ACCE55-0400-A110-1337-000000000000',	'PBLC',	'Everyone',	'{}');


INSERT INTO "container_item" ("id", "type_", "order", "container_type", "container_id") VALUES
('00000000-0000-0000-0004-000000000003',	'Codelist',	1,	'Collection',	'00000000-0000-0000-0002-000000000001'),
('00000000-0000-0000-0004-000000000002',	'Codelist',	2,	'Collection',	'00000000-0000-0000-0002-000000000001'),
('00000000-0000-0000-0004-000000000001',	'Codelist',	3,	'Collection',	'00000000-0000-0000-0002-000000000001'),
('00000000-0000-0000-0004-000000000004',	'Codelist',	1,	'Collection',	'00000000-0000-0000-0002-000000000002'),
('00000000-0000-0000-0004-000000000007',	'Codelist',	1,	'Collection',	'00000000-0000-0000-0002-000000000004'),
('00000000-0000-0000-0004-000000000006',	'Codelist',	2,	'Collection',	'00000000-0000-0000-0002-000000000004'),
('00000000-0000-0000-0004-000000000005',	'Codelist',	3,	'Collection',	'00000000-0000-0000-0002-000000000004'),
('00000000-0000-0000-0004-000000000008',	'Codelist',	1,	'Collection',	'00000000-0000-0000-0002-000000000005'),
('00000000-0000-0000-0005-000000000001',	'Phenotype',	1,	'Collection',	'00000000-0000-0000-0002-000000000007'),
('00000000-0000-0000-0004-000000000009',	'Codelist',	1,	'Phenotype',	'00000000-0000-0000-0005-000000000001');


INSERT INTO "collection" ("id", "name", "item_type", "description", "properties", "reference_id", "locked") VALUES
('00000000-0000-0000-0002-000000000001',	'Flieder [Sample]',	'Codelist',	'Descr 1',	'{}',	NULL, FALSE),
('00000000-0000-0000-0002-000000000002',	'Pacific AF [Sample]',	'Codelist',	'Descr 2',	'{}',	NULL, FALSE),
('00000000-0000-0000-0002-000000000003',	'Empty Code Collection',	'Codelist',	'Descr 3',	'{}',	NULL, FALSE),
('00000000-0000-0000-0002-000000000004',	'Flieder [Sample]',	'Codelist',	'Descr 4',	'{}',	NULL, FALSE),
('00000000-0000-0000-0002-000000000005',	'Pacific AF [Sample]',	'Codelist',	'Descr 5',	'{}',	NULL, FALSE),
('00000000-0000-0000-0002-000000000006',	'Empty Code Collection',	'Codelist',	'Descr 6',	'{}',	NULL, FALSE),
('00000000-0000-0000-0002-000000000007',	'Phenotype Collection',	'Phenotype',	'Descr 7',	'{}',	NULL, FALSE),
('00000000-0000-0000-0002-000000000008',	'Other Phenotype Collection',	'Phenotype',	'Descr 8',	'{}',	NULL, FALSE);


INSERT INTO "workspace" ("id", "user_id", "collection_ids") VALUES
('00000000-0000-0000-0003-000000000001',	'00000000-0000-0000-0001-000000000001',	'{00000000-0000-0000-0002-000000000002,00000000-0000-0000-0002-000000000001,00000000-0000-0000-0002-000000000003, 00000000-0000-0000-0002-000000000007, 00000000-0000-0000-0002-000000000008}'),
('00000000-0000-0000-0003-000000000002',	'00000000-0000-0000-0001-000000000002',	'{00000000-0000-0000-0002-000000000005,00000000-0000-0000-0002-000000000004,00000000-0000-0000-0002-000000000006}');


INSERT INTO "share" ("user_id", "collection_id") VALUES
('00000000-0000-0000-0001-000000000001',	'00000000-0000-0000-0002-000000000004'),
('00000000-0000-0000-0001-000000000002',	'00000000-0000-0000-0002-000000000001'),
('00000000-0000-0000-0001-000000000002',	'00000000-0000-0000-0002-000000000003');


INSERT INTO "phenotype" ("id", "name", "medical_description", "operational_description", "properties", "reference_id") VALUES
('00000000-0000-0000-0005-000000000001',	'CKD',	'CKD description',	'CKD op description',	'{"Used for": [1, "inclusion"]}',	NULL);


INSERT INTO "property" ("id", "class_name", "name", "dtype", "dtype_meta", "required", "read_only") VALUES
(1,	'Phenotype',	'Used for',	'Enum',	'{"0": "inclusion", "1": "exclusion", "2": "outcome", "3": "baseline covariate", "4": "entry criterion", "5": "matching feature", "99": "other"}',	'1', '0'),
(3,	'Collection',	'Created',	'Time',	'{}',	'0', '1'),
(4,	'Collection',	'Last Edited',	'Time',	'{}',	'0', '1'),
(5,	'Collection',	'Created By',	'User',	'{}',	'0', '1'),
(6,	'Collection',	'Last Edited By',	'User',	'{}',	'0', '1'),
(7,	'Phenotype',	'Created',	'Time',	'{}',	'0', '1'),
(8,	'Phenotype',	'Last Edited',	'Time',	'{}',	'0', '1'),
(9,	'Phenotype',	'Created By',	'User',	'{}',	'0', '1'),
(10,	'Phenotype',	'Last Edited By',	'User',	'{}',	'0', '1'),
(11,	'Phenotype',	'PPV',	'Text',	'{}',	'0', '0'),
(12,	'Phenotype',	'NPV',	'Text',	'{}',	'0', '0'),
(13,	'Phenotype',	'Sensitivity',	'Text',	'{}',	'0', '0'),
(14,	'Phenotype',	'Specificity',	'Text',	'{}',	'0', '0'),
(15,	'Phenotype',	'References',	'Text',	'{}',	'0', '0'),
(16,	'Collection',	'Impact Study Nr',	'Text',	'{}',	'0', '0'),
(17,	'Collection',	'Sharepoint',	'Text',	'{}',	'0', '0'),
(18,	'Collection',	'Medicinal product',	'Text',	'{}',	'0', '0'),
(19,	'Collection',	'Study Type',	'Text',	'{}',	'0', '0'),
(20,	'Collection',	'Study Phase',	'Text',	'{}',	'0', '0'),
(21,	'Collection',	'Country',	'Text',	'{}',	'0', '0'),
(22,	'Collection',	'Authors',	'Text',	'{}',	'0', '0'),
(23,	'Collection',	'Datasources',	'Text',	'{}',	'0', '0'),
(24,	'Phenotype',	'Datasources',	'Text',	'{}',	'0', '0'),
(25,	'Phenotype',	'Country',	'Text',	'{}',	'0', '0');


INSERT INTO "codelist" ("id", "name", "description", "transient_commit_id", "reference_id") VALUES
('00000000-0000-0000-0004-000000000001',	'Coronary Artery Disease',	'Imported ''Coronary Artery Disease'' from file ''init.csv'' with 146 codes from 2 ontologies (ICD-10-CM: 79/79, ICD-9-CM: 67/67).',	NULL,	NULL),
('00000000-0000-0000-0004-000000000002',	'Atherosclerosis',	'Imported ''Atherosclerosis'' from file ''init.csv'' with 29 codes from 2 ontologies (ICD-10-CM: 15/15, ICD-9-CM: 14/14).',	NULL,	NULL),
('00000000-0000-0000-0004-000000000003',	'Angina',	'Imported ''Angina'' from file ''init.csv'' with 9 codes from 2 ontologies (ICD-10-CM: 5/5, ICD-9-CM: 4/4).',	NULL,	NULL),
('00000000-0000-0000-0004-000000000004',	'Coronary Artery Disease',	'Imported ''Coronary Artery Disease'' from file ''init.csv'' with 89 codes from 2 ontologies (ICD-10-CM: 65/65, ICD-9-CM: 24/24).',	NULL,	NULL),
('00000000-0000-0000-0004-000000000005',	'Coronary Artery Disease',	'Imported ''Coronary Artery Disease'' from file ''init.csv'' with 146 codes from 2 ontologies (ICD-10-CM: 79/79, ICD-9-CM: 67/67).',	NULL,	NULL),
('00000000-0000-0000-0004-000000000006',	'Atherosclerosis',	'Imported ''Atherosclerosis'' from file ''init.csv'' with 29 codes from 2 ontologies (ICD-10-CM: 15/15, ICD-9-CM: 14/14).',	NULL,	NULL),
('00000000-0000-0000-0004-000000000007',	'Angina',	'Imported ''Angina'' from file ''init.csv'' with 9 codes from 2 ontologies (ICD-10-CM: 5/5, ICD-9-CM: 4/4).',	NULL,	NULL),
('00000000-0000-0000-0004-000000000008',	'Coronary Artery Disease',	'Imported ''Coronary Artery Disease'' from file ''init.csv'' with 89 codes from 2 ontologies (ICD-10-CM: 65/65, ICD-9-CM: 24/24).',	NULL,	NULL),
('00000000-0000-0000-0004-000000000009',	'Coronary Artery Disease',	'Imported ''Coronary Artery Disease'' from file ''init.csv'' with 89 codes from 2 ontologies (ICD-10-CM: 65/65, ICD-9-CM: 24/24).',	NULL,	'00000000-0000-0000-0004-000000000008');


INSERT INTO "commit" ("id", "codelist_id", "author_id", "created_at", "message", "position") VALUES
(1,	'00000000-0000-0000-0004-000000000001',	'00000000-0000-0000-0001-000000000001',	'2022-12-15 11:19:29.408137',	'Imported ''Coronary Artery Disease'' from file ''init.csv'' with 146 codes from 2 ontologies (ICD-10-CM: 79/79, ICD-9-CM: 67/67).',	0),
(2,	'00000000-0000-0000-0004-000000000002',	'00000000-0000-0000-0001-000000000001',	'2022-12-15 11:19:29.449419',	'Imported ''Atherosclerosis'' from file ''init.csv'' with 29 codes from 2 ontologies (ICD-10-CM: 15/15, ICD-9-CM: 14/14).',	0),
(3,	'00000000-0000-0000-0004-000000000003',	'00000000-0000-0000-0001-000000000001',	'2022-12-15 11:19:29.4659',	'Imported ''Angina'' from file ''init.csv'' with 9 codes from 2 ontologies (ICD-10-CM: 5/5, ICD-9-CM: 4/4).',	0),
(4,	'00000000-0000-0000-0004-000000000004',	'00000000-0000-0000-0001-000000000001',	'2022-12-15 11:19:29.53859',	'Imported ''Coronary Artery Disease'' from file ''init.csv'' with 89 codes from 2 ontologies (ICD-10-CM: 65/65, ICD-9-CM: 24/24).',	0),
(5,	'00000000-0000-0000-0004-000000000005',	'00000000-0000-0000-0001-000000000002',	'2022-12-16 11:19:29.408137',	'Imported ''Coronary Artery Disease'' from file ''init.csv'' with 146 codes from 2 ontologies (ICD-10-CM: 79/79, ICD-9-CM: 67/67).',	0),
(6,	'00000000-0000-0000-0004-000000000006',	'00000000-0000-0000-0001-000000000002',	'2022-12-16 11:19:29.449419',	'Imported ''Atherosclerosis'' from file ''init.csv'' with 29 codes from 2 ontologies (ICD-10-CM: 15/15, ICD-9-CM: 14/14).',	0),
(7,	'00000000-0000-0000-0004-000000000007',	'00000000-0000-0000-0001-000000000002',	'2022-12-16 11:19:29.4659',	'Imported ''Angina'' from file ''init.csv'' with 9 codes from 2 ontologies (ICD-10-CM: 5/5, ICD-9-CM: 4/4).',	0),
(8,	'00000000-0000-0000-0004-000000000008',	'00000000-0000-0000-0001-000000000002',	'2022-12-16 11:19:29.53859',	'Imported ''Coronary Artery Disease'' from file ''init.csv'' with 89 codes from 2 ontologies (ICD-10-CM: 65/65, ICD-9-CM: 24/24).',	0),
(9,	'00000000-0000-0000-0004-000000000009',	'00000000-0000-0000-0001-000000000001',	'2023-08-15 14:26:42',	'Imported ''Coronary Artery Disease'' from file ''init.csv'' with 89 codes from 2 ontologies (ICD-10-CM: 65/65, ICD-9-CM: 24/24).',	0);

SELECT setval(pg_get_serial_sequence('commit', 'id'), (select max("id") from "commit"));


INSERT INTO "changeset" ("id", "commit_id", "ontology_id", "code_ids_added", "code_ids_removed") VALUES
(1,	1,	'ICD-10-CM',	'{34560,34561,34562,34564,34565,34567,34568,34569,34570,34576,34577,34578,34579,34580,34582,34583,34584,34585,34586,34587,34588,34589,34590,34592,34593,34594,34598,34600,34601,34602,34603,34604,34605,34607,34608,34609,34610,34613,34614,34615,34616,34618,34619,34620,34621,34623,34624,34625,34626,34628,34629,34630,34631,119112,34633,34634,34635,34636,34638,34639,34640,34641,34643,34644,34645,34646,34649,34650,34651,34652,34653,34654,34655,34656,119021,34554,34555,34556,34557}',	'{}'),
(2,	1,	'ICD-9-CM',	'{331821,315805,315806,315807,315808,315809,315810,315811,315812,315813,315814,315815,315816,315817,315818,315819,315820,315821,315822,315823,315824,315825,315826,315827,315828,315829,315830,315831,315832,315833,315834,315835,315836,315837,315838,315839,315840,315841,315842,315843,315844,315846,315847,315848,315849,315850,315851,315853,315854,315855,315858,315859,315860,315861,315862,315863,315864,315865,315867,315868,315869,315870,315871,315872,315873,315874,315875}',	'{}'),
(3,	2,	'ICD-10-CM',	'{35365,35558,35462,35366,35655,35402,35657,35658,35373,35659,35408,35379,35414,35510,35385}',	'{}'),
(4,	2,	'ICD-9-CM',	'{316128,316113,316114,316116,316117,316118,316119,316120,316121,316123,316124,316125,316126,316127}',	'{}'),
(5,	3,	'ICD-10-CM',	'{34553,34554,34555,34556,34557}',	'{}'),
(6,	3,	'ICD-9-CM',	'{315855,315853,315854,315847}',	'{}'),
(7,	4,	'ICD-10-CM',	'{34597,34598,34599,34600,34601,34602,34603,34606,34607,34608,34609,34610,34611,34612,34613,34614,34615,34616,34617,34618,34619,34620,34621,34622,34623,34624,34625,34626,34627,34628,34629,34630,34631,119112,34633,34634,34635,34636,34632,34638,34639,34640,34641,34637,34643,34644,34645,34646,34642,34647,34649,34650,34651,34652,34653,34654,34655,34656,34648,119021,34553,34554,34555,34556,34557}',	'{}'),
(8,	4,	'ICD-9-CM',	'{315847,315848,315849,315850,315852,315854,315855,315856,315859,315860,315861,315862,315863,315864,315865,315866,315868,315869,315870,315871,315872,315873,315874,315875}',	'{}'),
(9,	5,	'ICD-10-CM',	'{34560,34561,34562,34564,34565,34567,34568,34569,34570,34576,34577,34578,34579,34580,34582,34583,34584,34585,34586,34587,34588,34589,34590,34592,34593,34594,34598,34600,34601,34602,34603,34604,34605,34607,34608,34609,34610,34613,34614,34615,34616,34618,34619,34620,34621,34623,34624,34625,34626,34628,34629,34630,34631,119112,34633,34634,34635,34636,34638,34639,34640,34641,34643,34644,34645,34646,34649,34650,34651,34652,34653,34654,34655,34656,119021,34554,34555,34556,34557}',	'{}'),
(10,	5,	'ICD-9-CM',	'{331821,315805,315806,315807,315808,315809,315810,315811,315812,315813,315814,315815,315816,315817,315818,315819,315820,315821,315822,315823,315824,315825,315826,315827,315828,315829,315830,315831,315832,315833,315834,315835,315836,315837,315838,315839,315840,315841,315842,315843,315844,315846,315847,315848,315849,315850,315851,315853,315854,315855,315858,315859,315860,315861,315862,315863,315864,315865,315867,315868,315869,315870,315871,315872,315873,315874,315875}',	'{}'),
(11,	6,	'ICD-10-CM',	'{35365,35558,35462,35366,35655,35402,35657,35658,35373,35659,35408,35379,35414,35510,35385}',	'{}'),
(12,	6,	'ICD-9-CM',	'{316128,316113,316114,316116,316117,316118,316119,316120,316121,316123,316124,316125,316126,316127}',	'{}'),
(13,	7,	'ICD-10-CM',	'{34553,34554,34555,34556,34557}',	'{}'),
(14,	7,	'ICD-9-CM',	'{315855,315853,315854,315847}',	'{}'),
(15,	8,	'ICD-10-CM',	'{34597,34598,34599,34600,34601,34602,34603,34606,34607,34608,34609,34610,34611,34612,34613,34614,34615,34616,34617,34618,34619,34620,34621,34622,34623,34624,34625,34626,34627,34628,34629,34630,34631,119112,34633,34634,34635,34636,34632,34638,34639,34640,34641,34637,34643,34644,34645,34646,34642,34647,34649,34650,34651,34652,34653,34654,34655,34656,34648,119021,34553,34554,34555,34556,34557}',	'{}'),
(16,	8,	'ICD-9-CM',	'{315847,315848,315849,315850,315852,315854,315855,315856,315859,315860,315861,315862,315863,315864,315865,315866,315868,315869,315870,315871,315872,315873,315874,315875}',	'{}'),
(17,	9,	'ICD-10-CM',	'{34597,34598,34599,34600,34601,34602,34603,34606,34607,34608,34609,34610,34611,34612,34613,34614,34615,34616,34617,34618,34619,34620,34621,34622,34623,34624,34625,34626,34627,34628,34629,34630,34631,119112,34633,34634,34635,34636,34632,34638,34639,34640,34641,34637,34643,34644,34645,34646,34642,34647,34649,34650,34651,34652,34653,34654,34655,34656,34648,119021,34553,34554,34555,34556,34557}',	'{}'),
(18,	9,	'ICD-9-CM',	'{315847,315848,315849,315850,315852,315854,315855,315856,315859,315860,315861,315862,315863,315864,315865,315866,315868,315869,315870,315871,315872,315873,315874,315875}',	'{}');

SELECT setval(pg_get_serial_sequence('changeset', 'id'), (select max("id") from "changeset"));


COMMIT;
